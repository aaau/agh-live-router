<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="AGH Live Router : " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>AGH Live Router</title>
  </head>

  <body>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<p><iframe src="http://prezi.com/embed/iez6ctgkd8dt/?bgcolor=ffffff&amp;lock_to_path=0&amp;autoplay=no&amp;autohide_ctrls=0" width="662" height="400" frameBorder="0"></iframe></p>

<h3>AGH Live Router</h3>

<p align="justify">AGH Live Router is a Debian derivative distribtion for experimental routing. It consists of Click Modular Router, running in kernel mode, and XORP routing suite. System is already configured and ready-to-use, distributed as an .iso image.</p>

<h3>Details</h3>

<p align="justify">ISO file contains image of a live system. Distribution is based on Debian 6.0 (Squeeze). It contains installed Click environment (linuxmodule version) and XORP suite. XORP starts automatically on system startup. XORP, during its initialization, loads Click modules. Therefore, router becomes operational automatically after system startup. Additionally, along with start of graphical environment, Clicky application starts. This allows fast verification of correctness of Click startup and configuration load.</p>

<h3>Usage</h3>

<p align="justify">Bootable live USB drive can be created with the <a href="http://unetbootin.sourceforge.net/">UNetbootin</a> application. After creation of USB drive, you may want to put router configuration files on the USB. This configuration will be automatically loaded on system startup. Configuration files should be placed in "config" directory on the USB drive. This directory should contain the following files:</p>

<pre><code>X:\config\config.boot
X:\config\click_generator
</code></pre>

<p align="justify">The<code>config.boot</code>file contains XORP configuration. A XORP router must be configured to perform the desired operations. At very minimum, a routerâ€™s interfaces and FEA must be configured. A very simply configuration can be found <a href="https://github.com/piotrjurkiewicz/agh-live-router/tree/master/configurations/simple/config">there</a>. More information about writing XORP configurations you can find in the relevant XORP <a href="http://xorp.run.montefiore.ulg.ac.be/latex2wiki/user_manual/configuration_overview">manual section</a>.</p> <p>In case of AGH Live Router system, configuration file should contain the following FEA section:</p>

<pre><code>fea {
    unicast-forwarding4 {
  	disable: false
    }
    click {
		disable: false
		duplicate-routes-to-kernel: true

		kernel-click {
			disable: false
			install-on-startup:	true
			kernel-click-modules: "/usr/local/lib/proclikefs.ko:/usr/local/lib/click.ko"
			mount-directory: "/click"
			kernel-click-config-generator-file: "/etc/xorp/click_generator"
		}

		user-click {
			disable: true
			command-file: "/usr/local/bin/click"
			command-extra-arguments: "-R"
			command-execute-on-startup: true
			control-address: 127.0.0.1
			control-socket-port: 13000
			startup-config-file: "/dev/null"
			user-click-config-generator-file: "/etc/xorp/click_generator"
		}
    }
}</code></pre>

<p align="justify">The<code>click_generator</code>file contains an AWK script, which generates the kernel-level Click configuration from the XORP configuration. The script is called on-demand by the FEA whenever the network interface information changes. The default script you can find <a href="https://github.com/piotrjurkiewicz/agh-live-router/blob/master/configurations/simple/config/click_generator">there</a>. You may not want to modify the generator script, unless you are making significant changes in router's packet forwarding mechanisms.</p>

<h3>Running in VM</h3>

<p align="justify">You can also run system directly from the ISO file in a virtual machine. We recommend using Oracle's VirtualBox. In VirtualBox you can simple create internal networks between virtual machines and therefore experiment with various topologies. However, you must carefully choose network adapter types. Our test showed that the best performance (more than 30MB/s across 3 VMs) can be achieved using Intel PRO/1000 MT Desktop (82540EM). Do not choose virtio-net adapter because Click's kernel module doesn't work with the driver, what results in very bad performance in that case.</p>

<p align="center">
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/adapters.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/adapters.png" /></a>
</p>

<p align="justify">If you want to put configuration and package files into an ISO image, you can use UltraISO application (for Windows). It has a feature of editing ISO images and adding additional files.</p>

<h3>Packages</h3>

<p align="justify">Distribution supports simple loading of Click packages. Packages modules, compiled as kernel modules (.ko) should be placed in "packages" directory. After placing .ko file in "packages" you should do the following things:</p>

<p align="justify">a) In <code>config.boot</code> file you should add path to module in "kernel-click modules":</p>

<pre><code>kernel-click-modules: "/usr/local/lib/proclikefs.ko:/usr/local/lib/click.ko:<span style="color: red;">/live/image/packages/package_name.ko</span>"</code></pre>

<p align="justify">b) Moreover, <code>require(package_name);</code> declaration should appear in Click's configuration. If you are using <code>click_generator</code> script to generate Click configuration, you should place appropriate instructions in function which generates headers:</p>

<pre><code>function generate_click_config_header()
{
    printf("//\n");
    printf("// Generated by XORP FEA\n");
    printf("//\n");
    printf("\n\n");
    printf("require(package_name);");
    printf("\n\n");
}</code></pre>

<h3>Download</h3>
<p><a href="https://mega.co.nz/#!NcVBATaB!Qg6QmDpsPr7mO2iKSovFsDdSCwt5aaP07B9St3n8Epc">ISO image</a></p>

<h3>Credentials</h3>
<p>Default user:</p>
<pre><code>login:router
password:router
</code></pre>
<p>Root:</p>
<pre><code>login:root
password:root
</code></pre>

<h3>Screenshots</h3>

<p align="center">
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/1.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/1.png" /></a>
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/2.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/2.png" /></a>
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/3.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/3.png" /></a>
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/4.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/4.png" /></a>
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/5.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/5.png" /></a>
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/6.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/6.png" /></a>
<a href="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/7.png"><img src="https://raw.github.com/piotrjurkiewicz/agh-live-router/master/screenshots/7.png" /></a>
</p>

<p></p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">AGH Live Router maintained by <a href="https://github.com/piotrjurkiewicz">piotrjurkiewicz</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
